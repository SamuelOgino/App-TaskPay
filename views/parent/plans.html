{% from 'shared/_macros.html' import flash_messages %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskPay - Planos e Assinatura</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/plan_parent.css') }}">
</head>
<body>

<div class="phone">

    <header class="app-header">
        {{ flash_messages() }}
        <a href="{{ url_for('parent.home') }}"><i class="fa-solid fa-arrow-left"></i></a>
        <div class="logo">
            <i class="fa-solid fa-list"></i>
            <span>TaskPay</span>
        </div>
    </header>

    <!-- MAIN -->
    <main class="content-area">

        <div class="page-title-area">
            <h2 class="page-title">Planos e Assinatura</h2>
            <p class="subtitle">Escolha o plano ideal para sua família</p>
        </div>

        <section class="card plan-card {% if plano_atual == 'FREE' %}current{% endif %}">
            <h3 class="plan-name">
                {% if plano_atual == 'FREE' %}Seu plano atual: <span class="tag-free">FREE</span>{% else %}Plano Grátis{% endif %}
            </h3>
            <p class="price-free">R$ 0,00 / mês</p>

            <ul class="plan-list">
                <li><i class="fa-solid fa-circle-check"></i> 1 pai + filhos ilimitados</li>
                <li><i class="fa-solid fa-circle-check"></i> Tarefas ilimitadas</li>
                <li><i class="fa-solid fa-circle-check"></i> Envio de fotos</li>
                <li><i class="fa-solid fa-circle-check"></i> Aprovação parental</li>
                <li><i class="fa-solid fa-circle-check"></i> Histórico básico</li>
            </ul>

            <button class="btn disabled" disabled>
                {% if plano_atual == 'FREE' %}Plano Ativo{% else %}Incluído no PRO{% endif %}
            </button>
        </section>

        <section class="card plan-card pro {% if plano_atual == 'PRO' %}current{% endif %}">
            
            {% if plano_atual == 'FREE' %}
                <div class="badge-popular">MAIS ESCOLHIDO</div>
            {% endif %}

            <h3 class="plan-name">
                TaskPay PRO 
                {% if plano_atual == 'PRO' %}<span style="font-size: 0.6em; background:var(--warning); color: white; padding: 2px 8px; border-radius: 4px; vertical-align: middle;">ATIVO</span>{% endif %}
            </h3>
            <p class="price-month">R$ 9,90/mês</p>
            <p class="price-annual">ou R$ 99,00/ano (economize 15%)</p>

            <ul class="plan-list">
                <li><i class="fa-solid fa-check"></i> 1 pai + filhos ilimitados</li>
                <li><i class="fa-solid fa-check"></i> Tarefas ilimitadas</li>
                <li><i class="fa-solid fa-check"></i> Envio de fotos</li>
                <li><i class="fa-solid fa-check"></i> Aprovação parental</li>
                <li><i class="fa-solid fa-check"></i> Histórico básico</li>
                
                <li style="margin-top: 15px; border-top: 1px dashed #ccc; padding-top:10px; color: var(--primary); font-weight:bold;">
                    <i class="fa-solid fa-plus"></i> EXCLUSIVO PRO:
                </li>

                <li><i class="fa-solid fa-headset"></i> Suporte prioritário</li>
                <li><i class="fa-solid fa-bolt"></i> Funcionalidade do XP</li>
                <li><i class="fa-solid fa-chart-line"></i> Resumo de XP</li>
                
                <li class="destaque-gold">
                    <i class="fa-solid fa-gift"></i> Loja de Recompensas
                </li>
            </ul>

            {% if plano_atual == 'FREE' %}
                <form action="{{ url_for('parent.subscribe_pro') }}" method="POST">
                    <button type="submit" class="btn primary">Assinar PRO Agora</button>
                </form>
            {% else %}
                <button class="btn disabled" disabled>Você já é PRO!</button>
                <p style="text-align: center; font-size: 0.8rem; margin-top: 5px; color: var(--muted);">Sua assinatura está ativa e rodando.</p>
            {% endif %}

        </section>

        <section class="card faq-card">
            <h3 class="section-title">Perguntas frequentes</h3>
            <details class="faq-item">
                <summary>Posso cancelar quando quiser?</summary>
                <p>Sim. Cancelamento imediato.</p>
            </details>
            <details class="faq-item">
                <summary>Existe período de teste?</summary>
                <p>Sim! 7 dias gratuitos no PRO.</p>
            </details>
            <details class="faq-item">
                <summary>Perco dados ao mudar de plano?</summary>
                <p>Não. Todo histórico é preservado.</p>
            </details>
        </section>

    </main>

    <footer class="app-footer-nav">
            <a href="{{ url_for('parent.home') }}" class="nav-item">
                <i class="fa-solid fa-house"></i>
                <span>Início</span>
            </a>
            <a href="{{ url_for('parent.tasks_page') }}" class="nav-item">
                <i class="fa-solid fa-list-check"></i>
                <span>Tarefas</span>
            </a>
            <a href="{{ url_for('parent.rewards_page') }}" class="nav-item">
                <i class="fa-solid fa-gift"></i>
                <span>Recompensas</span>
            </a>
            <a href="{{ url_for('parent.profile_page') }}" class="nav-item active">
                <i class="fa-solid fa-user"></i>
                <span>Perfil</span>
            </a>
        </footer>

</div>

</body>
</html>
